import{aX as f,u as I,k as O,l as V,al as g,m as c,Z as l,a2 as b,M as z,aY as A}from"./Cjz5paxR.js";import{c as x}from"./BQmqigCO.js";class D{#t;#e;constructor(e,r){this.#t=e,this.#e=x(r)}get current(){return this.#e(),this.#t()}}const J=/\(.+\)/,Q=new Set(["all","print","screen","and","or","not","only"]);class X extends D{constructor(e,r){let n=J.test(e)||e.split(/[\s,]+/).some(i=>Q.has(i.trim()))?e:`(${e})`;const s=window.matchMedia(n);super(()=>s.matches,i=>f(s,"change",i))}}const W=typeof window<"u"?window:void 0;function Z(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}let K=class{#t;#e;constructor(e={}){const{window:r=W,document:n=r?.document}=e;r!==void 0&&(this.#t=n,this.#e=x(s=>{const i=f(r,"focusin",s),o=f(r,"focusout",s);return()=>{i(),o()}}))}get current(){return this.#e?.(),this.#t?Z(this.#t):null}};new K;function U(t,e){switch(t){case"post":O(e);break;case"pre":I(e);break}}function F(t,e,r,n={}){const{lazy:s=!1}=n;let i=!s,o=Array.isArray(t)?[]:void 0;U(e,()=>{const a=Array.isArray(t)?t.map(w=>w()):t();if(!i){i=!0,o=a;return}const d=V(()=>r(a,o));return o=a,d})}function T(t,e,r){F(t,"post",e,r)}function Y(t,e,r){F(t,"pre",e,r)}T.pre=Y;function G(t,e){switch(t){case"local":return e.localStorage;case"session":return e.sessionStorage}}class N{#t;#e;#n;#r;#i;#s=g(0);constructor(e,r,n={}){const{storage:s="local",serializer:i={serialize:JSON.stringify,deserialize:JSON.parse},syncTabs:o=!0,window:a=W}=n;if(this.#t=r,this.#e=e,this.#n=i,a===void 0)return;const d=G(s,a);this.#r=d;const w=d.getItem(e);w!==null?this.#t=this.#o(w):this.#u(r),o&&s==="local"&&(this.#i=x(()=>f(a,"storage",this.#c)))}get current(){this.#i?.(),c(this.#s);const e=this.#o(this.#r?.getItem(this.#e))??this.#t,r=new WeakMap,n=s=>{if(s===null||s?.constructor.name==="Date"||typeof s!="object")return s;let i=r.get(s);return i||(i=new Proxy(s,{get:(o,a)=>(c(this.#s),n(Reflect.get(o,a))),set:(o,a,d)=>(l(this.#s,c(this.#s)+1),Reflect.set(o,a,d),this.#u(e),!0)}),r.set(s,i)),i};return n(e)}set current(e){this.#u(e),l(this.#s,c(this.#s)+1)}#c=e=>{e.key!==this.#e||e.newValue===null||(this.#t=this.#o(e.newValue),l(this.#s,c(this.#s)+1))};#o(e){try{return this.#n.deserialize(e)}catch(r){console.error(`Error when parsing "${e}" from persisted store "${this.#e}"`,r);return}}#u(e){try{e!=null&&this.#r?.setItem(this.#e,this.#n.serialize(e))}catch(r){console.error(`Error when writing value from persisted store "${this.#e}" to ${this.#r}`,r)}}}function M(t){return t.filter(e=>e.length>0)}const R={getItem:t=>null,setItem:(t,e)=>{}},p=typeof document<"u";function H(t){return typeof t=="function"}function ee(t){return t!==null&&typeof t=="object"}const m=Symbol("box"),_=Symbol("is-writable");function te(t){return ee(t)&&m in t}function re(t){return u.isBox(t)&&_ in t}function u(t){let e=g(b(t));return{[m]:!0,[_]:!0,get current(){return c(e)},set current(r){l(e,r,!0)}}}function ne(t,e){const r=z(t);return e?{[m]:!0,[_]:!0,get current(){return c(r)},set current(n){e(n)}}:{[m]:!0,get current(){return t()}}}function se(t){return u.isBox(t)?t:H(t)?u.with(t):u(t)}function ie(t){return Object.entries(t).reduce((e,[r,n])=>u.isBox(n)?(u.isWritableBox(n)?Object.defineProperty(e,r,{get(){return n.current},set(s){n.current=s}}):Object.defineProperty(e,r,{get(){return n.current}}),e):Object.assign(e,{[r]:n}),{})}function oe(t){return u.isWritableBox(t)?{[m]:!0,get current(){return t.current}}:t}u.from=se;u.with=ne;u.flatten=ie;u.readonly=oe;u.isBox=te;u.isWritableBox=re;function ue(t,e){const r=RegExp(t,"g");return n=>{if(typeof n!="string")throw new TypeError(`expected an argument of type string, but got ${typeof n}`);return n.match(r)?n.replace(r,e):n}}const ce=ue(/[A-Z]/,t=>`-${t.toLowerCase()}`);function ae(t){if(!t||typeof t!="object"||Array.isArray(t))throw new TypeError(`expected an argument of type object, but got ${typeof t}`);return Object.keys(t).map(e=>`${ce(e)}: ${t[e]};`).join(`
`)}function le(t={}){return ae(t).replace(`
`," ")}const de={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",transform:"translateX(-100%)"};le(de);const fe=typeof window<"u"?window:void 0;function he(t){let e=t.activeElement;for(;e?.shadowRoot;){const r=e.shadowRoot.activeElement;if(r===e)break;e=r}return e}class me{#t;#e;constructor(e={}){const{window:r=fe,document:n=r?.document}=e;r!==void 0&&(this.#t=n,this.#e=x(s=>{const i=f(r,"focusin",s),o=f(r,"focusout",s);return()=>{i(),o()}}))}get current(){return this.#e?.(),this.#t?he(this.#t):null}}new me;const S=u("mode-watcher-mode"),E=u("mode-watcher-theme"),ge=["dark","light","system"];function C(t){return typeof t!="string"?!1:ge.includes(t)}class pe{#t="system";#e=p?localStorage:R;#n=this.#e.getItem(S.current);#r=C(this.#n)?this.#n:this.#t;#i=g(b(this.#s()));#s(e=this.#r){return new N(S.current,e,{serializer:{serialize:r=>r,deserialize:r=>C(r)?r:this.#t}})}constructor(){A(()=>T.pre(()=>S.current,(e,r)=>{const n=c(this.#i).current;l(this.#i,this.#s(n),!0),r&&localStorage.removeItem(r)}))}get current(){return c(this.#i).current}set current(e){c(this.#i).current=e}}class we{#t=void 0;#e=!0;#n=g(b(this.#t));#r=typeof window<"u"&&typeof window.matchMedia=="function"?new X("prefers-color-scheme: light"):{current:!1};query(){p&&l(this.#n,this.#r.current?"light":"dark",!0)}tracking(e){this.#e=e}constructor(){A(()=>{I(()=>{this.#e&&this.query()})}),this.query=this.query.bind(this),this.tracking=this.tracking.bind(this)}get current(){return c(this.#n)}}const v=new pe,ye=new we;class be{#t=p?localStorage:R;#e=this.#t.getItem(E.current);#n=this.#e===null||this.#e===void 0?"":this.#e;#r=g(b(this.#i()));#i(e=this.#n){return new N(E.current,e,{serializer:{serialize:r=>typeof r!="string"?"":r,deserialize:r=>r}})}constructor(){A(()=>T.pre(()=>E.current,(e,r)=>{const n=c(this.#r).current;l(this.#r,this.#i(n),!0),r&&localStorage.removeItem(r)}))}get current(){return c(this.#r).current}set current(e){c(this.#r).current=e}}const k=new be;let $,B,P=!1,h=null;function xe(){return h||(h=document.createElement("style"),h.appendChild(document.createTextNode(`* {
		-webkit-transition: none !important;
		-moz-transition: none !important;
		-o-transition: none !important;
		-ms-transition: none !important;
		transition: none !important;
	}`)),h)}function q(t,e=!1){if(typeof document>"u")return;if(!P){P=!0,t();return}if(typeof window<"u"&&window.__vitest_worker__){t();return}clearTimeout($),clearTimeout(B);const n=xe(),s=()=>document.head.appendChild(n),i=()=>{n.parentNode&&document.head.removeChild(n)};function o(){t(),window.requestAnimationFrame(i)}if(typeof window.requestAnimationFrame<"u"){s(),e?o():window.requestAnimationFrame(()=>{o()});return}s(),$=window.setTimeout(()=>{t(),B=window.setTimeout(i,16)},16)}const y=u(void 0),L=u(!0),j=u(!1),Se=u([]),Ee=u([]);function ke(){const t=z(()=>{if(!p)return;const e=v.current==="system"?ye.current:v.current,r=M(Se.current),n=M(Ee.current);function s(){const i=document.documentElement,o=document.querySelector('meta[name="theme-color"]');e==="light"?(r.length&&i.classList.remove(...r),n.length&&i.classList.add(...n),i.style.colorScheme="light",o&&y.current&&o.setAttribute("content",y.current.light)):(n.length&&i.classList.remove(...n),r.length&&i.classList.add(...r),i.style.colorScheme="dark",o&&y.current&&o.setAttribute("content",y.current.dark))}return L.current?q(s,j.current):s(),e});return{get current(){return c(t)}}}function ze(){const t=z(()=>{if(k.current,!p)return;function e(){document.documentElement.setAttribute("data-theme",k.current)}return L.current?q(e,V(()=>j.current)):e(),k.current});return{get current(){return c(t)}}}const Me=ke(),Ce=ze();export{L as a,y as b,k as c,Se as d,Me as e,Ce as f,ye as g,C as i,Ee as l,S as m,j as s,E as t,v as u};
